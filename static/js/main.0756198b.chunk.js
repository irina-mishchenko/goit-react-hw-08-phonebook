(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{10:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var c={};n.r(c),n.d(c,"getIsLoggedIn",(function(){return a})),n.d(c,"getUsername",(function(){return u})),n.d(c,"getIsFetchingCurrent",(function(){return o}));var r=n(18),a=function(t){return t.auth.isLoggedIn},u=function(t){return t.auth.user.name},o=function(t){return t.auth.isFetchingCurrentUser}},11:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContactsRequest",(function(){return r})),n.d(e,"fetchContactsSuccess",(function(){return a})),n.d(e,"fetchContactsError",(function(){return u})),n.d(e,"addContactRequest",(function(){return o})),n.d(e,"addContactSuccess",(function(){return s})),n.d(e,"addContactError",(function(){return i})),n.d(e,"deleteContactRequest",(function(){return d})),n.d(e,"deleteContactSuccess",(function(){return j})),n.d(e,"deleteContactError",(function(){return b})),n.d(e,"changeFilter",(function(){return l}));var c=n(4),r=Object(c.b)("contacts/fetchContactsRequest"),a=Object(c.b)("contacts/fetchContactsSuccess"),u=Object(c.b)("contacts/fetchContactsError"),o=Object(c.b)("contacts/addContactRequest"),s=Object(c.b)("contacts/addContactSuccess"),i=Object(c.b)("contacts/addContactError"),d=Object(c.b)("contacts/deleteContactRequest"),j=Object(c.b)("contacts/deleteContactSuccess"),b=Object(c.b)("contacts/deleteContactError"),l=Object(c.b)("contacts/changeFilter")},18:function(t,e,n){"use strict";n.r(e),n.d(e,"register",(function(){return j})),n.d(e,"logIn",(function(){return b})),n.d(e,"logOut",(function(){return l})),n.d(e,"fetchCurrentUser",(function(){return f}));var c=n(19),r=n.n(c),a=n(26),u=n(20),o=n.n(u),s=n(4);o.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var i=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){o.a.defaults.headers.common.Authorization=""},j=Object(s.c)("auth/register",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,i(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),b=Object(s.c)("auth/login",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,i(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),l=Object(s.c)("auth/logout",Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("users/logout");case 3:d(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),f=Object(s.c)("auth/refresh",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,u,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return i(a),t.prev=5,t.next=8,o.a.get("/users/current");case 8:return u=t.sent,s=u.data,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},54:function(t,e,n){t.exports={header:"AppBar_header__e5kMh"}},91:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(28),u=n.n(a),o=n(23),s=n(8),i=n(53),d=n(6),j=n(40),b=(n(27),n(22)),l=n(31),f=n(10),h=n(1);function O(t){var e=t.children,n=t.redirectTo,c=void 0===n?"/login":n,r=Object(l.a)(t,["children","redirectTo"]),a=Object(s.c)(f.b.getIsLoggedIn);return Object(h.jsx)(d.b,Object(b.a)(Object(b.a)({},r),{},{children:a?e:Object(h.jsx)(d.a,{to:c})}))}function g(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=t.redirectTo,a=void 0===r?"/contacts":r,u=Object(l.a)(t,["children","restricted","redirectTo"]),o=Object(s.c)(f.b.getIsLoggedIn)&&c;return Object(h.jsx)(d.b,Object(b.a)(Object(b.a)({},u),{},{children:o?Object(h.jsx)(d.a,{to:a}):e}))}var p=n(15),x=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{children:Object(h.jsxs)(p.a,{variant:"tabs",defaultActiveKey:"/",children:[Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{href:"/register",children:"Sign up"})}),Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{href:"/login",children:"LogIn"})})]})})})},v=n(42);function C(){var t=Object(s.b)(),e=Object(s.c)(f.b.getUsername);return Object(h.jsxs)("div",{children:[Object(h.jsxs)("span",{children:["Welcome, ",e," "]}),Object(h.jsx)(v.a,{variant:"primary",type:"button",onClick:function(){return t(f.a.logOut())},children:"Log out"})]})}var m=function(){var t=Object(s.c)(f.b.getIsLoggedIn);return Object(h.jsx)("div",{children:Object(h.jsxs)(p.a,{variant:"tabs",defaultActiveKey:"/",children:[Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{href:"/",children:"Home Page"})}),t&&Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{href:"/contacts",children:"Contacts"})})]})})},k=n(54),I=n.n(k);function y(){var t=Object(s.c)(f.b.getIsLoggedIn);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:I.a.header,children:[Object(h.jsx)(m,{}),t?Object(h.jsx)(C,{}):Object(h.jsx)(x,{})]}),Object(h.jsx)("hr",{})]})}var L=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,98))})),S=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,99))})),w=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,101))})),F=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,100))}));var U,E,R,q=function(){var t=Object(s.b)(),e=Object(s.c)(f.b.getIsFetchingCurrent);return Object(c.useEffect)((function(){t(f.a.fetchCurrentUser())}),[t]),Object(h.jsx)(h.Fragment,{children:e?Object(h.jsx)(j.a,{animation:"grow"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(y,{}),Object(h.jsx)(d.d,{children:Object(h.jsxs)(c.Suspense,{fallback:Object(h.jsx)(j.a,{animation:"grow"}),children:[Object(h.jsx)(g,{path:"/",exact:!0,children:Object(h.jsx)(F,{})}),Object(h.jsx)(g,{path:"/register",restricted:!0,children:Object(h.jsx)(L,{})}),Object(h.jsx)(g,{path:"/login",restricted:!0,children:Object(h.jsx)(S,{})}),Object(h.jsx)(O,{path:"/contacts",children:Object(h.jsx)(w,{})})]})})]})})},z=n(30),A=n(4),T=n(41),B=n(55),_=n.n(B),J=n(56),K=n.n(J),M=n(5),W=n(7),H=n(11),N=Object(A.d)([],(U={},Object(M.a)(U,H.fetchContactsSuccess,(function(t,e){return e.payload})),Object(M.a)(U,H.addContactSuccess,(function(t,e){return[e.payload].concat(Object(z.a)(t))})),Object(M.a)(U,H.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),U)),P=Object(A.d)(!1,(E={},Object(M.a)(E,H.fetchContactsRequest,(function(){return!0})),Object(M.a)(E,H.fetchContactsSuccess,(function(){return!1})),Object(M.a)(E,H.fetchContactsError,(function(){return!1})),Object(M.a)(E,H.addContactRequest,(function(){return!0})),Object(M.a)(E,H.addContactSuccess,(function(){return!1})),Object(M.a)(E,H.addContactError,(function(){return!1})),Object(M.a)(E,H.deleteContactRequest,(function(){return!0})),Object(M.a)(E,H.deleteContactSuccess,(function(){return!1})),Object(M.a)(E,H.deleteContactError,(function(){return!1})),E)),V=Object(A.d)("",Object(M.a)({},H.changeFilter,(function(t,e){return e.payload}))),D=Object(W.c)({items:N,filter:V,loading:P}),G=n(18),Q=Object(A.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(R={},Object(M.a)(R,G.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(M.a)(R,G.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(M.a)(R,G.logOut.fulfilled,(function(t){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(M.a)(R,G.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(M.a)(R,G.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(M.a)(R,G.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),R)}).reducer,X=[].concat(Object(z.a)(Object(A.f)()),[K.a]),Y={key:"auth",storage:_.a,whitelist:["token"]},Z=Object(A.a)({reducer:{auth:Object(T.a)(Y,Q),contacts:D},middleware:X,devTools:!1}),$=Object(T.b)(Z);u.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(s.a,{store:Z,children:Object(h.jsx)(i.a,{loading:null,persistor:$,children:Object(h.jsx)(o.a,{children:Object(h.jsx)(q,{})})})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.0756198b.chunk.js.map